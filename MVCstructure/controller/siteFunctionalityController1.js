function arrowColorReset(){mLeft=parseInt($("#slidingList").css("marginLeft")),$(".listSliding li").css("display","block").size()<=8?($("#moviePosterPrev .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterPrev .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#moviePosterNext .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterNext .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666")):($("#slidingList").css("margin-left","0px"),$("#moviePosterPrev .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterPrev .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#moviePosterNext .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#moviePosterNext .smallerTriangleArrow").css("border-color",smallerTriangleColor)),$("#theatreDetails > li").size()<=1?($("#theatreDetails").css("margin-top","30px"),$("#theatreDetails .arrowTop .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#theatreDetails .arrowTop .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#theatreDetails .arrowBottom .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#theatreDetails .arrowBottom .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666")):($("#theatreDetails").css("margin-top","30px"),$("#movieInfoScrollBar .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#movieInfoScrollBar .smallerTriangleArrow").css("border-color",smallerTriangleColor),$("#movieInfoScrollBar .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#movieInfoScrollBar .smallerTriangleArrow").css("border-color",smallerTriangleColor))}function LightenDarkenColor(e,r){var t=!1;"#"==e[0]&&(e=e.slice(1),t=!0);var o=parseInt(e,16),a=(o>>16)+r;a>255?a=255:0>a&&(a=0);var s=(o>>8&255)+r;s>255?s=255:0>s&&(s=0);var n=(255&o)+r;return n>255?n=255:0>n&&(n=0),(t?"#":"")+(n|s<<8|a<<16).toString(16)}function loadJson(){$.getJSON("MVCstructure/model/templateInfo.JSON",function(e){jsonData=e})}function Functionalities(){loadJson()}var smallerTriangleColor="",biggerTriangleColor="",slidingListId=document.getElementById("slidingList"),smallerTriangle=document.getElementsByClassName("smallerTriangleArrow")[0],biggerTriangle=document.getElementsByClassName("biggerTriangleArrow")[0],mLeft=0,i=1,ticketsSoldOut=0,j=1,flag=!0,dateFlag=!1,theatreFlag=!1,biggerTriangleColor=window.getComputedStyle(document.getElementsByClassName("biggerTriangleArrow")[0]).getPropertyValue("border-color"),smallerTriangleColor=window.getComputedStyle(document.getElementsByClassName("smallerTriangleArrow")[0]).getPropertyValue("border-color"),seatsAllocationFinishedFlag=!1,clickCount=0,ticketArrayFormat,exactBG=$("#checkTicketsAvailability").css("background-color"),jsonData,movieCarouselContainmentModel=can.Model({findAll:"GET ../model/templateInfo.JSON",create:"POST ../model/templateInfo.JSON"},{});can.fixture("GET ../model/templateInfo.JSON",function(){return jsonData.data}),$("#moviePosterPrev .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterPrev .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),len=$("#slidingList>li").length,$("#slidingList>li").size()<=1&&($("#moviePosterPrev .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterPrev .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#moviePosterNext .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterNext .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666")),$("#movieDates .square").click(function(){dateFlag=!0});var moviesLength=$(".movieName").size(),moviePosterLength=0;moviePosterLength=$(".moviePoster").size();var posterImage;$("#theatreWithinCityDetails .arrowTop").bind({click:function(){var e=parseInt($("#theatreDetails").css("margin-top")),r=(parseInt($("#theatreDetails").css("margin-bottom")),$("#theatreDetails > li").length);r>1?($("#theatreWithinCityDetails .arrowTop .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#theatreWithinCityDetails .arrowTop .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#theatreWithinCityDetails .arrowBottom .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#theatreWithinCityDetails .arrowBottom .smallerTriangleArrow").css("border-color",smallerTriangleColor)):($("#theatreWithinCityDetails .arrowTop .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#theatreWithinCityDetails .arrowTop .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#theatreWithinCityDetails .arrowBottom .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#theatreWithinCityDetails .arrowBottom .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999")),250>=e&&e>=-(50*(r-1))?($("#theatreDetails").css("margin-top",e+50+"px"),$("#theatreWithinCityDetails .arrowBottom .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#theatreWithinCityDetails .arrowBottom .smallerTriangleArrow").css("border-color",smallerTriangleColor),$("#theatreWithinCityDetails .arrowTop .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#theatreWithinCityDetails .arrowTop .smallerTriangleArrow").css("border-color",smallerTriangleColor)):($("#theatreWithinCityDetails .arrowTop .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#theatreWithinCityDetails .arrowTop .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#theatreWithinCityDetails .arrowBottom .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#theatreWithinCityDetails .arrowBottom .smallerTriangleArrow").css("border-color",smallerTriangleColor)),console.log(e+"top")}}),$("#theatreWithinCityDetails .arrowBottom").bind({click:function(){var e=parseInt($("#theatreDetails").css("margin-top")),r=(parseInt($("#theatreDetails").css("margin-bottom")),$("#theatreDetails > li").length);e>=50*-(r-2)?($("#theatreDetails").css("margin-top",e-50+"px"),$("#theatreWithinCityDetails .arrowBottom .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#theatreWithinCityDetails .arrowBottom .smallerTriangleArrow").css("border-color",smallerTriangleColor),$("#theatreWithinCityDetails .arrowTop .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#theatreWithinCityDetails .arrowTop .smallerTriangleArrow").css("border-color",smallerTriangleColor)):($("#theatreWithinCityDetails .arrowBottom .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#theatreWithinCityDetails .arrowBottom .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#theatreWithinCityDetails .arrowTop .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#theatreWithinCityDetails .arrowTop .smallerTriangleArrow").css("border-color",smallerTriangleColor))}}),$("#cancelSeat").click(function(){$(".chosenSeats").css({"background-color":"#FFF",color:"#000"}),$(".seatNo").removeClass("chosenSeats"),alert("Closing the Window without booking the ticket"),$("#movieDates div").css({border:"2px solid transparent",color:"#000"}),$("#movieDates div").removeClass("square"),$("#movieDates div").removeClass("dayClickedActive"),$("#movieDates div").attr("class","square1"),$("#movieDates div").css("background-color","grey"),$("#seatAllocation").hide("drop"),$(".overlay").hide(),$("#ticketDay").text(""),$("#ticketMonth").text(""),$("#ticketDate").text(""),$("#ticketTime").text(""),$("#ticketSeats").text("<Please Select>"),$("#ticketMovie").text("<Please Select>"),$("#ticketLocation").text("<Please Select>"),$("#ticketScreen").text("<Please Select>"),$("#ticketClass").text("<Please Select>"),$("#ticketCost").text("<Please Complete Selection>"),$("#showsTab").unbind(),$("#showsTabContent").css("display","none"),$("#moviesInfoTabContent").css("display","none"),$("#showsTab").css({"box-shadow":"","moz-box-shadow":"","ms-box-shadow":""}),$("#moviesInfoTab").css({"box-shadow":"","moz-box-shadow":"","ms-box-shadow":""}),$("#moviesInfoTab").unbind()}),$("#confirmSeat").mouseover(function(){$(".chosenSeats").size()==$("#seats").val()?($("#cancelSeat").css({"background-color":"#000"}),$("#seatAllocation").css({"background-color":"#000"}),$(".seatNo").css({"background-color":"#000",color:"#000"}),$(".chosenSeats").css({border:"3px solid #FFF",color:"#FFF","background-color":"#090"})):alert("So Far you have chosen "+$(".chosenSeats").size()+" seat(s). You must choose exactly "+$("#seats").val()+" seat(s) as you opted")}),$("#confirmSeat").mouseout(function(){(1==seatsAllocationFinishedFlag||$(".chosenSeats").size()==$("#seats").val())&&($("#seatAllocation").css({"background-color":exactBG}),$("#cancelSeat").css({"background-color":"#FFF"}),$(".seatNo").css({"background-color":"#FFF",color:"#000"}),$(".chosenSeats").css({border:"3px solid #000",color:"#FFF","background-color":"#090"}),$(".bookedTicket").css({border:"3px solid #000",color:"#FFF","background-color":"#900"}),seatsAllocationFinishedFlag=!1)}),$("#seatAllocation .seatNo").click(function(){-1!=$(this).attr("class").indexOf("chosenSeats")?($(this).removeClass("chosenSeats"),$(this).css({"background-color":"#FFF",color:"#000"})):-1==$(this).attr("class").indexOf("bookedTicket")&&($(this).addClass("chosenSeats"),$(this).css({"background-color":"#090",color:"#FFF"})),$(".chosenSeats").size()==$("#seats").val()&&(seatsAllocationFinishedFlag=!0)}),$("#confirmSeat").bind({click:function(){$("#movieDates div").css({border:"2px solid transparent",color:"#000"}),$("#movieDates div").removeClass("square"),$("#movieDates div").removeClass("dayClickedActive"),$("#movieDates div").attr("class","square1"),$("#movieDates div").css("background-color","grey");for(var e="",r=new Array,t=0;t<$(".chosenSeats").size();t++)0==t&&(e+="["),e+=$(".chosenSeats:eq("+t+")").text()+"|",r[t]=$(".chosenSeats:eq("+t+")").text(),t==$(".chosenSeats").size()-1&&(e+="[");var o=0;if(null==localStorage.getItem("Theatre")||void 0==localStorage.getItem("Theatre"))localStorage.setItem("Theatre",$("#ticketLocation").text()+"-"+$("#ticketScreen").text()+"-"+$("#ticketDay").text()+"-"+$("#ticketMonth").text()+"-"+$("#ticketDate").text()+"-"+$("#ticketTime").text()+e+(o+$(".chosenSeats").size()));else{var a=localStorage.getItem("Theatre"),s=a.split("["),n=s[1].split("|");console.log("| length"+n.length);for(var i=0;i<n.length-1;i++)console.log("|"+n[i]);for(var t=0;t<$(".chosenSeats").size();t++)console.log("present "+r[t]);localStorage.setItem("Theatre",$("#ticketLocation").text()+"-"+$("#ticketScreen").text()+"-"+$("#ticketDay").text()+"-"+$("#ticketMonth").text()+"-"+$("#ticketDate").text()+"-"+$("#ticketTime").text()+e+(o+$(".chosenSeats").size()))}if(null==localStorage.getItem("theatreSeats")||void 0==localStorage.getItem("theatreSeats")){for(var t=0;t<$(".chosenSeats").length;t++)var l=$(".chosenSeats:eq("+t+")").text()+"-";console.log(l),localStorage.setItem("theatreSeats",l)}else{var c=localStorage.getItem("theatreSeats");console.log(c);for(var g=c.split("-"),t=0;t<g.length;t++)console.log(g[t]),$(".seatNo:eq("+(g[t]-1)+")").css({"background-color":"#900",color:"#FFF"});for(var d=(t+$(".chosenSeats").length,""),i=0;i<$(".chosenSeats").length;i++)d+=$(".chosenSeats:eq("+i+")").text()+"-";localStorage.setItem("theatreSeats",c+d)}$("#ticketDay").text(""),$("#ticketMonth").text(""),$("#ticketDate").text(""),$("#ticketTime").text(""),$("#ticketSeats").text("<Please Select>"),$("#ticketMovie").text("<Please Select>"),$("#ticketLocation").text("<Please Select>"),$("#ticketScreen").text("<Please Select>"),$("#ticketClass").text("<Please Select>"),$("#ticketCost").text("<Please Complete Selection>"),$("#seatAllocation").toggle("drop"),$(".overlay").hide(),$("#showsTab").unbind(),$("#moviesInfoTab").unbind(),$("#showsTabContent").css("display","none"),$("#moviesInfoTabContent").css("display","none"),$("#showsTab").css({"box-shadow":"","moz-box-shadow":"","ms-box-shadow":""}),$("#moviesInfoTab").css({"box-shadow":"","moz-box-shadow":"","ms-box-shadow":""})}});var shortDay=new Date;shortDay.getDay();var dateArr=["SUN","MON","TUE","WED","THU","FRI","SAT"];shortDay.getDate();for(var i=0;9>i;i++){$("#movieDates div:eq("+i+")").find("p:eq(0)").text(dateArr[shortDay.getDay()]),$("#movieDates div:eq("+i+")").find("p:eq(1)").text(shortDay.getDate());var nextDate=shortDay.setDate(shortDay.getDate()+1),nDay=new Date(nextDate);nDay.getDay(),nDay.getDate(),dateArr[nDay.getDay()],dateArr[shortDay.getDay()]}$("#languageFilter").bind({change:function(){$("#movieLanguagePosters").empty(),new movieCarouselContainmentControl("#movieLanguagePosters"),console.log("Number of Movies "+$(".listSliding li").size())}}),$("#theatreWithinCity").bind({change:function(){$("#ticketDetails").empty(),new movieTimingsControl("#ticketDetails")}}),setInterval(function(){$("#legends li").slideToggle()},1e3),$("#bookNowBtn").click(function(){if(1==theatreFlag)if(1==dateFlag){if($("#theatreSeats div").removeClass("chosenSeats"),theatreFlag=!1,dateFlag=!1,$(".overlay").show(),$(".overlay").css("height",$(document).height()+10+"px"),$("#seatAllocation").show("drop"),null!=localStorage.getItem("theatreSeats")){var e=localStorage.getItem("theatreSeats");console.log(e);for(var r=e.split("-"),t=0;t<r.length-1;t++)console.log(r[t]),$(".seatNo:eq("+(r[t]-1)+")").css({"background-color":"#900",color:"#FFF"}),$(".seatNo:eq("+(r[t]-1)+")").addClass("bookedTicket")}}else alert("Choose the date of booking. So, ticket has not booked");else alert("Choose the theatre screen you wish to book. So, ticket has not booked")}),$("#seats").change(function(){$("#ticketSeats").text($("#seats").val())}),$("#themeList li").bind({click:function(e){if("OceanBlue"==$.trim($(this).text())){less.modifyVars({"@orange":"#1BA1E2"}),smallerTriangleColor="transparent transparent transparent #1BA1E2";var r=LightenDarkenColor("#1BA1E2",20);biggerTriangleColor="transparent transparent transparent "+r,exactBG=$("#checkTicketsAvailability").css("background-color"),$("select option").css({"background-color":"#1BA1E2",color:"#FFF"}),$("#bookNowBtn").css({"background-color":"#1BA1E2",color:"#FFF"}),arrowColorReset()}if("CalmGreen"==$.trim(e.target.innerHTML)){less.modifyVars({"@orange":"#128428"}),smallerTriangleColor="transparent transparent transparent #128428";var r=LightenDarkenColor("#128428",20);biggerTriangleColor="transparent transparent transparent "+r,exactBG=$("#checkTicketsAvailability").css("background-color"),$("select option").css({"background-color":"#128428",color:"#FFF"}),$("#bookNowBtn").css({"background-color":"#128428",color:"#FFF"}),arrowColorReset()}if("VelvetRed"==$.trim(e.target.innerHTML)){less.modifyVars({"@orange":"#AA1010"}),smallerTriangleColor="transparent transparent transparent #AA1010";var r=LightenDarkenColor("#AA1010",20);biggerTriangleColor="transparent transparent transparent "+r,exactBG=$("#checkTicketsAvailability").css("background-color"),$("select option").css({"background-color":"#AA1010",color:"#FFF"}),$("#bookNowBtn").css({"background-color":"#AA1010",color:"#FFF"}),arrowColorReset()}if("FancyPink"==$.trim(e.target.innerHTML)){less.modifyVars({"@orange":"#C1004F"}),smallerTriangleColor="transparent transparent transparent #C1004F";var r=LightenDarkenColor("#C1004F",20);biggerTriangleColor="transparent transparent transparent "+r,exactBG=$("#checkTicketsAvailability").css("background-color"),$("select option").css({"background-color":"#C1004F",color:"#FFF"}),$("#bookNowBtn").css({"background-color":"#C1004F",color:"#FFF"}),arrowColorReset()}if("DustyBrown"==$.trim(e.target.innerHTML)){less.modifyVars({"@orange":"#A05000"}),smallerTriangleColor="transparent transparent transparent #A05000";var r=LightenDarkenColor("#A05000",20);biggerTriangleColor="transparent transparent transparent "+r,exactBG=$("#checkTicketsAvailability").css("background-color"),$("select option").css({"background-color":"#A05000",color:"#FFF"}),$("#bookNowBtn").css({"background-color":"#A05000",color:"#FFF"}),arrowColorReset()}if("RESET"==$.trim(e.target.innerHTML)){less.modifyVars({"@orange":"#FF9500"}),smallerTriangleColor="transparent transparent transparent #FF9500";var r=LightenDarkenColor("#FF9500",20);biggerTriangleColor="transparent transparent transparent "+r,exactBG=$("#checkTicketsAvailability").css("background-color"),$("select option").css({"background-color":"#FF9500",color:"#FFF"}),$("#bookNowBtn").css({"background-color":"#FF9500",color:"#FFF"}),arrowColorReset()}$("#themeList").css("display","none"),$("#seats").css({background:"url(images/selectDropDownImg.png) 26px 10px no-repeat"}),$("#languageFilter").css({background:"url(images/selectDropDownImg.png) 75px 8px no-repeat"}),$("#theatreWithinCity").css({background:"url(images/selectDropDownImg.png) 112px 12px no-repeat"})}});var movieCarouselContainmentControl=can.Control({init:function(e){movieCarouselContainmentModel.findAll({},function(r){e.append(can.view("MVCstructure/view/movieCarouselView7.ejs",r)),$(".listSliding li").css("display","block").size()<=8?($("#moviePosterPrev .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterPrev .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#moviePosterNext .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterNext .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666")):($("#slidingList").css("margin-left","0px"),$("#moviePosterPrev .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterPrev .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#moviePosterNext .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#moviePosterNext .smallerTriangleArrow").css("border-color",smallerTriangleColor))})},"#moviePosterNext .arrowRight click":function(){$(".moviePoster").size()>7&&(1==flag&&(slidingListWidth=parseInt(window.getComputedStyle(document.getElementById("slidingList")).getPropertyValue("width"))-11,len=$("#slidingList>li").length,flag=!1),mLeft=parseInt($("#slidingList").css("marginLeft")),console.log(mLeft),mLeft>-((len-1)*slidingListWidth)&&0>=mLeft&&$("#slidingList").css("marginLeft",mLeft-slidingListWidth+"px"),$("#slidingList>li").size()<=1?($("#moviePosterNext .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterNext .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666")):-((len-2)*slidingListWidth)>=mLeft?($("#moviePosterNext .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterNext .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#moviePosterPrev .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#moviePosterPrev .smallerTriangleArrow").css("border-color",smallerTriangleColor)):($("#moviePosterNext .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#moviePosterNext .smallerTriangleArrow").css("border-color",smallerTriangleColor)))},"#moviePosterPrev .arrowLeft click":function(){$(".moviePoster").size()>7&&(1==flag&&(slidingListWidth=parseInt(window.getComputedStyle(document.getElementById("slidingList")).getPropertyValue("width"))-11,len=$("#slidingList>li").length,$("#moviePosterNext .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterNext .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),flag=!1),$("#slidingList>li").size()<=1?($("#moviePosterNext .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterNext .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666")):(mLeft=parseInt($("#slidingList").css("marginLeft")),mLeft>=-((len-1)*slidingListWidth)&&0>mLeft&&$("#slidingList").css("marginLeft",mLeft+slidingListWidth+"px"),mLeft>=0-slidingListWidth?($("#moviePosterPrev .biggerTriangleArrow").css("border-color","transparent transparent transparent #999999"),$("#moviePosterPrev .smallerTriangleArrow").css("border-color","transparent transparent transparent #666666"),$("#moviePosterNext .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#moviePosterNext .smallerTriangleArrow").css("border-color",smallerTriangleColor)):($("#moviePosterPrev .biggerTriangleArrow").css("border-color",biggerTriangleColor),$("#moviePosterPrev .smallerTriangleArrow").css("border-color",smallerTriangleColor))))},".moviePoster click":function(e){$("#movieDates div").attr("class","square1"),$("#movieDates div").css("border","2px solid transparent"),$("#movieDates div").css("background-color","grey"),$("#movieDates div").css("color","#000"),$("#movieDates div").removeClass("dayClickedActive"),$("#ticketDay").text(""),$("#ticketMonth").text(""),$("#ticketDate").text(""),$("#ticketTime").text(""),$("#ticketSeats").text("<Please Select>"),$("#ticketMovie").text("<Please Select>"),$("#ticketLocation").text("<Please Select>"),$("#ticketScreen").text("<Please Select>"),$("#ticketClass").text("<Please Select>"),$("#ticketCost").text("<Please Complete Selection>");for(var r=$(e).attr("id"),t=0,o=0;o<jsonData.data.length;o++)if(jsonData.data[o].movies[0].id==r){if($("#moviePosterDetails li:eq(1) p").text(jsonData.data[o].movies[0].language),"No Schedule"!=jsonData.data[o].movies[0].availability){$("#movieDates div").css({border:"2px solid transparent",color:"#000"});for(var t=0;t<jsonData.data[o].movies[0].numberOfDays;t++)$("#movieDates div:eq("+t+")").css("background-color","#00BB00"),$("#movieDates div:eq("+t+")").attr("class","square");for(l=jsonData.data[o].movies[0].numberOfDays;9>l;l++)$("#movieDates div:eq("+l+")").attr("class","square1")}for(var a=jsonData.data[o].movies[0].theatreName.length,s=0;a>s;s++);$("#ticketDetails").empty(),new movieTimingsControl("#ticketDetails")}$("#theatreDetails").css("margin-top","30px"),$("#moviePosterAtInformationPanel").attr("src",$(e).find("img:eq(1)").attr("src")),$("#movieNameAtInformationPanel").css("background-color",$(e).find("p:first").css("background-color")),$("#movieNameAtInformationPanel").html("<p>"+$(e).find("div:first").text()+"</p>"),$("#moviePosterDetails h1").text($(e).find("div:first p").text()),$("#hiddenMovieId").val(r),$("#showsTabContent").css("display","block"),$("#showsTab").css({"box-shadow":"0px 11px 40px 0px #555","-moz-box-shadow":"0px 11px 40px 0px #555","-ms-box-shadow":"0px 11px 40px 0px #555"}),$("#moviesInfoTab").css({"box-shadow":"","-moz-box-shadow":"","-ms-box-shadow":""}),$("#moviesInfoTabContent").css("display","none"),$("#showsTab").bind({click:function(){$("#showsTabContent").css("display","block"),$("#showsTab").css({"box-shadow":"0px 11px 40px 0px #555","-moz-box-shadow":"0px 11px 40px 0px #555","-ms-box-shadow":"0px 11px 40px 0px #555"}),$("#moviesInfoTab").css({"box-shadow":"","-moz-box-shadow":"","-ms-box-shadow":""}),$("#moviesInfoTabContent").css("display","none")}}),$("#moviesInfoTab").bind({click:function(){$("#moviesInfoTabContent").css("display","block"),$("#moviesInfoTab").css({"box-shadow":"0px 11px 40px 0px #555","-moz-box-shadow":"0px 11px 40px 0px #555","-ms-box-shadow":"0px 11px 40px 0px #555"}),$("#showsTab").css({"box-shadow":"","-moz-box-shadow":"","-ms-box-shadow":""}),$("#showsTabContent").css("display","none")}}),$("#movieDates .square").click(function(){dateFlag=!0,$("#movieDates .square").removeClass("dayClickedActive"),$("#movieDates .square").css({border:"2px solid transparent",color:"#000"}),-1==$(this).attr("class").indexOf("square1")&&($(this).addClass("dayClickedActive"),$(this).css({border:"2px solid #000000",color:"#FFF"}));var e=new Date,r=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","NOVEMBER","DECEMBER"];r[e.getMonth()],$("#ticketDay").text($(".dayClickedActive").find("p:first").text()+" "),$("#ticketMonth").text(r[e.getMonth()]+" "),$("#ticketDate").text($(".dayClickedActive").find("p:eq(1)").text()+" "),dateFlag=!0})},".moviePoster mouseenter":function(e){$(e).index();$(e).find("img:eq(0)").attr("src",jsonData.data[$(e).attr("id")-1].movies[0].posterHover)},".moviePoster mouseleave":function(e){$(e).index();$(e).find("img:eq(0)").attr("src",jsonData.data[$(e).attr("id")-1].movies[0].poster)}}),movieTimingsControl=can.Control({init:function(e){movieCarouselContainmentModel.findAll({},function(r){e.append(can.view("MVCstructure/view/movieCarouselView8.ejs",r))})},".theatreName click":function(e,r){for(var t,o=0;o<jsonData.data.length;o++)$("#hiddenMovieId").attr("value")==jsonData.data[o].movies[0].id&&(t=jsonData.data[o].movies[0].availability);if("Full"==t)r.preventDefault(),$(e).text("Tickets Full");else if("No Schedule"==t)r.preventDefault(),$(e).text("Not Yet Scheduled");else{$(".theatreName").css("border","2px solid transparent"),$(r.target).css("border","2px solid #000");var a=$.trim($("#moviePosterDetails h1").text()),s=$.trim(r.target.parentNode.parentNode.childNodes[1].innerHTML),n=$.trim(r.target.parentNode.parentNode.childNodes[3].innerHTML);screenTheatreArr=$.trim(n).split("|");var i=$.trim(r.target.parentNode.parentNode.childNodes[5].childNodes[1].innerHTML),l=(i.split("|"),$.trim(r.target.parentNode.childNodes[1].innerHTML)),c=l.split("/"),g=c[1],d=c[0],m=$.trim(screenTheatreArr[0]),p=g+" x "+$("#seats").val()+" = "+g*$("#seats").val()+" (Tickets) + 50 (Booking Fee) = Rs."+(g*$("#seats").val()+50);theatreFlag=!0;var b=$.trim(screenTheatreArr[1])+" ";$("#ticketTime").text(b),$("#ticketMovie").text(a),$("#ticketLocation").text(s),$("#ticketScreen").text(m),$("#ticketClass").text(d),$("#ticketCost").text(p),$("#ticketSeats").text($("#seats").val())}}});$(document).ready(Functionalities()),new movieCarouselContainmentControl("#movieLanguagePosters");